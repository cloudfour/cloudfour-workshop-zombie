<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Jason Grigsby and Lyza Danger Gardner">
  <title>Field Notes | 04: Bloodier Uprisings</title>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="fieldnotes.css">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src="fieldnotes.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Ropa+Sans:400,400italic' rel='stylesheet' type='text/css'>
</head>
<body>
<header>
<h1 class="title">Field Notes | 04: Bloodier Uprisings</h1>
<h2 class="author">Jason Grigsby and Lyza Danger Gardner</h2>
</header>
<hr>
<section class="level1" id="a-band-of-brothers">
<h1>6. A Band of Brothers</h1>
<ul>
<li><a href="http://www.jquerymobile.com">jQuery Mobile</a></li>
<li><a href="http://jacwright.com/projects/javascript/date_format/">JavaScript Date.Format</a>: A small library to emulate PHP-style date formatting.</li>
<li><a href="http://code.google.com/p/geo-location-javascript/">Geo-location-js</a>: A very easy cross-platform geolocation library that emulates the W3C Geolocation API.</li>
</ul>
<section class="level2" id="do-this-a-jquery-mobile-page-for-nabbing-zombies">
<h2><em>Do This</em>: A jQuery Mobile Page for Nabbing Zombies</h2>
<ol type="1">
<li>Find the &quot;I got one!&quot; starting point in your rucksack in <a href="../i-got-one/index.html"><code>i-got-one/index.html</code></a>.</li>
<li><p>Add a header:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> data-role=</span><span class="st">&quot;header&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;h1&gt;</span>I got one!<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;/div&gt;</span></code></pre></li>
<li><p>Add a <code>&lt;select&gt;</code> element, an <code>&lt;input&gt;</code> button and an empty <code>&lt;ul&gt;</code> to hold our incoming dead zombies. This should be the contents of the <code>&lt;div data-role=&quot;content&quot;&gt;</code>:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> data-role=</span><span class="st">&quot;content&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> data-role=</span><span class="st">&quot;fieldcontain&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;how-zombie&quot;</span><span class="kw">&gt;</span>How&#39;d you nab it?<span class="kw">&lt;/label&gt;</span>
    <span class="kw">&lt;select</span><span class="ot"> name=</span><span class="st">&quot;how-zombie&quot;</span><span class="ot"> id=</span><span class="st">&quot;how-zombie&quot;</span><span class="kw">&gt;</span>
      <span class="kw">&lt;option</span><span class="ot"> value=</span><span class="st">&quot;tank&quot;</span><span class="kw">&gt;</span>Tank<span class="kw">&lt;/option&gt;</span>
      <span class="kw">&lt;option</span><span class="ot"> value=</span><span class="st">&quot;conflagration&quot;</span><span class="kw">&gt;</span>Conflagration<span class="kw">&lt;/option&gt;</span>
      <span class="kw">&lt;option</span><span class="ot"> value=</span><span class="st">&quot;poison&quot;</span><span class="kw">&gt;</span>Poison<span class="kw">&lt;/option&gt;</span>
      <span class="kw">&lt;option</span><span class="ot"> value=</span><span class="st">&quot;nukes&quot;</span><span class="kw">&gt;</span>Micro-nukes<span class="kw">&lt;/option&gt;</span>
      <span class="kw">&lt;option</span><span class="ot"> value=</span><span class="st">&quot;trickery&quot;</span><span class="kw">&gt;</span>Trickery<span class="kw">&lt;/option&gt;</span>
      <span class="kw">&lt;option</span><span class="ot"> value=</span><span class="st">&quot;corrosive&quot;</span><span class="kw">&gt;</span>Corrosive<span class="kw">&lt;/option&gt;</span>
      <span class="kw">&lt;option</span><span class="ot"> value=</span><span class="st">&quot;dismemberment&quot;</span><span class="kw">&gt;</span>Dismemberment<span class="kw">&lt;/option&gt;</span>
    <span class="kw">&lt;/select&gt;</span>
  <span class="kw">&lt;/div&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;button&quot;</span><span class="ot"> value=</span><span class="st">&quot;I got one!&quot;</span><span class="ot"> id=</span><span class="st">&quot;got-one&quot;</span><span class="ot"> data-theme=</span><span class="st">&quot;b&quot;</span> <span class="kw">/&gt;</span>

  <span class="kw">&lt;ul</span><span class="ot"> data-role=</span><span class="st">&quot;listview&quot;</span><span class="ot"> data-inset=</span><span class="st">&quot;true&quot;</span><span class="ot"> id=</span><span class="st">&quot;zombielist&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;/ul&gt;</span>

<span class="kw">&lt;/div&gt;</span></code></pre></li>
<li><p>Drop in the intial JavaScript by adding a <code>&lt;script&gt;</code> tag after the <code>geo.js</code> <code>&lt;script&gt;</code> tag:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;zombie.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></code></pre></li>
<li><p>You can find the finished version of <code>index.html</code> for this step in your rucksack in <a href="../supplemental/band-of-brothers/step1.html"><code>supplemental/band-of-brothers/step1.html</code></a>.</p></li>
</ol>
</section>
<section class="level2" id="do-this-persistant-data-with-lawnchair">
<h2><em>Do This</em>: Persistant data with Lawnchair</h2>
<p>For this step, we use <a href="http://westcoastlogic.com/lawnchair/">Lawnchair</a>, an open-source JS library for storing data on the client:</p>
<ol type="1">
<li><p>Edit the <code>zombie.js</code> file.</p></li>
<li><p>Instantiate the Lawnchair. Add <code>var zombieChair   = Lawnchair({name: 'zombies'}, function() {});</code> right after the <code>zombies</code> array is created.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">window</span>.<span class="fu">zombieManager</span> = (<span class="kw">function</span>() {
  <span class="kw">var</span> zombies       = <span class="kw">new</span> <span class="kw">Array</span>();
  <span class="kw">var</span> zombieChair   = Lawnchair({<span class="dt">name</span>: <span class="ch">&#39;zombies&#39;</span>}, <span class="kw">function</span>() {});</code></pre></li>
<li><p>Add an init function. This should go in the returned object in the <code>zombieManager</code> function:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">return</span> {
  <span class="co">// Init; build initial #zombielist</span>
  <span class="dt">init          </span>: <span class="kw">function</span>() {
    <span class="kw">zombieChair</span>.<span class="fu">get</span>(<span class="ch">&#39;zombies&#39;</span>, <span class="kw">function</span>(zombiesOnIce) {
      <span class="kw">if</span> (zombiesOnIce) {
        zombies = <span class="kw">zombiesOnIce</span>.<span class="fu">value</span>;
      }
    });
    showZombies();
  },
  <span class="co">// Add a new zombie to the list of zombies</span>
  <span class="dt">addZombie     </span>: <span class="kw">function</span>(zombieWhen, zombieWhere, zombieHow) {
  <span class="co">// ...</span></code></pre></li>
<li><p>Update the <code>addZombie</code> function such that it also saves the incoming zombie to the Lawnchair:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">  },
  <span class="co">// Add a new zombie to the list of zombies</span>
  <span class="dt">addZombie     </span>: <span class="kw">function</span>(zombieWhen, zombieWhere, zombieHow) {
    zombies[<span class="kw">zombies</span>.<span class="fu">length</span>] = {
      <span class="dt">when      </span>: <span class="kw">zombieWhen</span>.<span class="fu">valueOf</span>(),
      <span class="dt">where     </span>: zombieWhere,
      <span class="dt">how       </span>: zombieHow
    };
    <span class="kw">zombieChair</span>.<span class="fu">save</span>({<span class="dt">key</span>: <span class="ch">&#39;zombies&#39;</span>, <span class="dt">value </span>: zombies });
    showZombies();
  }</code></pre></li>
<li><p>Update the <code>resetZombies</code> function to clear the Lawnchair using the <code>nuke</code> method:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> resetZombies = <span class="kw">function</span>() {
    zombies = <span class="kw">new</span> <span class="kw">Array</span>();
    <span class="kw">zombieChair</span>.<span class="fu">nuke</span>();
    $(<span class="ch">&#39;li.zombie&#39;</span>).<span class="fu">remove</span>();
    $(<span class="ch">&#39;#zombielist&#39;</span>).<span class="fu">listview</span>(<span class="ch">&#39;refresh&#39;</span>);
  };</code></pre></li>
<li><p>Now add a call to that new <code>init</code> function we wrote...</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">$(<span class="st">&quot;#nab-zombie&quot;</span>).<span class="fu">live</span>(<span class="ch">&#39;pageinit&#39;</span>, <span class="kw">function</span>() {

  <span class="co">// Initialize our list of zombies</span>
  <span class="kw">zombieManager</span>.<span class="fu">init</span>();
  <span class="co">// Is Geolocation supported?</span>
  <span class="co">// ...</span></code></pre></li>
<li><p>That's a lot of JavaScript. You can also find a final version of <code>zombie.js</code> in <a href="../supplemental/band-of-brothers/zombie.js"><code>supplemental/band-of-brothers/zombie.js</code></a>.</p></li>
</ol>
</section>
</section>
</body>
</html>
